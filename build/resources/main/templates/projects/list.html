<head>
        <title>Gestion des Départements</title>
        <link rel="stylesheet" 
          type="text/css" 
          th:href="@{/css/styleP.css}">
</head>

<div layout:fragment="content">
    <h1>Gestion des Projets</h1>

    <a th:href="@{/projects/new}" class="btn btn-success mb-3">
        <i class="fas fa-plus"></i> Nouveau Projet
    </a>

    <div th:if="${successMessage}" class="alert alert-success" th:text="${successMessage}"></div>

    <table class="table table-striped">
        <thead>
            <tr>
                <th>Projet</th>
                <th>Statut</th>
                <th>Employés (Nb)</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="project : ${projects}">
                <td th:text="${project.label}"></td>
                <td>
                    <span class="badge" 
                          th:classappend="${project.status == 'COMPLETED' ? 'bg-success' : (project.status == 'IN_PROGRESS' ? 'bg-warning text-dark' : 'bg-secondary')}"
                          th:text="${project.status}"></span>
                </td>
                <td th:text="${project.employees.size()}">0</td>
                <td>
                    <a th:href="@{/projects/{id}/details(id=${project.id})}" class="btn btn-sm btn-info">Détails/Affectation</a>
                    <a th:href="@{/projects/edit/{id}(id=${project.id})}" class="btn btn-sm btn-primary">Modifier</a>
                    
                    <form th:action="@{/projects/delete/{id}(id=${project.id})}" method="post" class="d-inline">
                        <button type="submit" class="btn btn-sm btn-danger" 
                                onclick="return confirm('Êtes-vous sûr de vouloir supprimer ce projet ?');">Supprimer</button>
                    </form>
                </td>
            </tr>
        </tbody>
    </table>
</div>